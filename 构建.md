# å¦‚ä½•æ„å»ºæ¨¡å‹
### 1.ç¯å¢ƒå‡†å¤‡
åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
```
# é»˜è®¤å®‰è£…CPUç‰ˆæœ¬ï¼Œå®‰è£…paddleæ—¶å»ºè®®ä½¿ç”¨ç™¾åº¦æº
pip install paddlepaddle -i https://mirror.baidu.com/pypi/simple
# åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
pip install paddlehub -i https://mirror.baidu.com/pypi/simple
hub install realsr==1.0.1
```
### 2.æœåŠ¡éƒ¨ç½²
```
hub serving start -m realsr
```
è¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªå›¾åƒè¶…åˆ†çš„åœ¨çº¿æœåŠ¡APIçš„éƒ¨ç½²ï¼Œé»˜è®¤ç«¯å£å·ä¸º8866ã€‚

NOTE: å¦‚ä½¿ç”¨GPUé¢„æµ‹ï¼Œåˆ™éœ€è¦åœ¨å¯åŠ¨æœåŠ¡ä¹‹å‰ï¼Œè¯·è®¾ç½®CUDA_VISIBLE_DEVICESç¯å¢ƒå˜é‡ï¼Œå¦åˆ™ä¸ç”¨è®¾ç½®ã€‚

### 3.å‘é€é¢„æµ‹è¯·æ±‚
```python
import requests
import json
import base64

import cv2
import numpy as np

def cv2_to_base64(image):
    data = cv2.imencode('.jpg', image)[1]
    return base64.b64encode(data.tostring()).decode('utf8')
def base64_to_cv2(b64str):
    data = base64.b64decode(b64str.encode('utf8'))
    data = np.fromstring(data, np.uint8)
    data = cv2.imdecode(data, cv2.IMREAD_COLOR)
    return data

# å‘é€HTTPè¯·æ±‚
org_im = cv2.imread('/PATH/TO/IMAGE')
data = {'images':cv2_to_base64(org_im)}
headers = {"Content-type": "application/json"}
url = "http://127.0.0.1:8866/predict/realsr"
r = requests.post(url=url, headers=headers, data=json.dumps(data))
img = base64_to_cv2(r.json()["results"])
cv2.imwrite('/PATH/TO/SAVE/IMAGE', img)
```
ğŸ˜²æ³¨æ„æµ‹è¯•å›¾ç‰‡å°ºå¯¸ä¸èƒ½å¤ªå¤§ï¼Œå¦åˆ™å¯èƒ½ä¼šçˆ†å†…å­˜ï¼å¦å¤–å¦‚æœæ˜¯åœ¨cpuæ¨ç†ï¼Œæ¨ç†å»¶è¿Ÿè¾ƒé«˜ï¼ˆ30sï¼‰å¯ä»¥æµ‹è¯•ä¸€ä¸‹GPUåŠ é€Ÿ
